<%= render("shared/settings/header") %>

<h2>User profile</h2>

<%= form_with(model: Current.user, url: user_profiles_path, method: :put) do |f| %>
  <% if f.object.errors.any? %>
    <div style="color: red">
      <strong><%= pluralize(f.object.errors.count, "error") %> prohibited this user from being saved:</strong>

      <ul>
        <% f.object.errors.each do |error| %>
          <li><%= error.full_message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div>
    <%= f.label :email, style: "display: block" %>
    <%= f.email_field :email, disabled: true %>
  </div>

  <div>
    <%= f.label :password_challenge, "Current password", style: "display: block" %>
    <%= f.password_field :password_challenge, required: true %>
  </div>

  <div>
    <%= f.label :password, "New password", style: "display: block" %>
    <%= f.password_field :password, required: true %>
  </div>

  <div>
    <%= f.label :password_confirmation, style: "display: block" %>
    <%= f.password_field :password_confirmation, required: true %>
  </div>

  <div>
    <%= f.submit "Update password" %>
    <%= link_to("Cancel", task_list_items_path(Current.task_list_id), style: "margin-left: 10px") %>
  </div>
<% end %>

<hr />

<h2>Account deletion</h2>

<p>
  Deleting your account will permanently remove all of your tasks and lists. This action cannot be undone.
</p>

<%= button_to(
  "Delete account",
  user_registrations_path,
  method: :delete,
  data: {turbo_confirm: "Are you sure you want to delete your account?"},
  style: "background-color: red; color: white; border: none"
) %>

